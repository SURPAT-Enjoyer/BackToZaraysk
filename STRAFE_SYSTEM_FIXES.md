# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —Å—Ç—Ä–µ–π—Ñ–∞ (Strafe System)

## üîç **–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ 1: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –≤–≤–æ–¥–∞**
- –í `BTZPlayerController` –Ω–µ –±—ã–ª–æ –ø—Ä–∏–≤—è–∑–æ–∫ –¥–ª—è –∫–ª–∞–≤–∏—à —Å—Ç—Ä–µ–π—Ñ–∞
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ Space –¥–ª—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Å—Ç—Ä–µ–π—Ñ–∞

### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ 2: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–≤–∏–∂–µ–Ω–∏—è**
- StrafeComponent –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∞–ª –¥–≤–∏–∂–µ–Ω–∏–µ (`MOVE_None`)
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –æ–±—ã—á–Ω—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º –∏ —Å—Ç—Ä–µ–π—Ñ–æ–º

### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ 3: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `TeleportPhysics` –≤—ã–∑—ã–≤–∞–ª–æ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–∏–∑–∏–∫–æ–π
- –†–µ–∑–∫–∏–µ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –ø–ª–∞–≤–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è

### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ 4: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
- –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–µ–π—Ñ–∞ –Ω–µ –±—ã–ª–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å –æ–±—ã—á–Ω—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º
- –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ–±—ã—á–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è —Å—Ç—Ä–µ–π—Ñ–∞

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### 1. **–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–≤—è–∑–∫–∏ –≤–≤–æ–¥–∞ –≤ PlayerController**
```cpp
// –í SetupInputComponent():
InputComponent->BindAction("StrafeLeft", EInputEvent::IE_Pressed, this, &ABTZPlayerController::StartStrafeLeft);
InputComponent->BindAction("StrafeLeft", EInputEvent::IE_Released, this, &ABTZPlayerController::StopStrafeLeft);
InputComponent->BindAction("StrafeRight", EInputEvent::IE_Pressed, this, &ABTZPlayerController::StartStrafeRight);
InputComponent->BindAction("StrafeRight", EInputEvent::IE_Released, this, &ABTZPlayerController::StopStrafeRight);
InputComponent->BindAction("StrafeSpace", EInputEvent::IE_Pressed, this, &ABTZPlayerController::StartStrafeSpace);
InputComponent->BindAction("StrafeSpace", EInputEvent::IE_Released, this, &ABTZPlayerController::StopStrafeSpace);
```

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –¥–≤–∏–∂–µ–Ω–∏—è**
```cpp
// –í–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è:
// Character->GetCharacterMovement()->SetMovementMode(MOVE_None);

// –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ:
Character->GetCharacterMovement()->StopMovementImmediately();
```

### 3. **–£–ª—É—á—à–µ–Ω–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞**
```cpp
// –í–º–µ—Å—Ç–æ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏:
// Character->SetActorLocation(CurrentLocation, false, nullptr, ETeleportType::TeleportPhysics);

// –ò—Å–ø–æ–ª—å–∑—É–µ–º –º—è–≥–∫–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ:
Character->SetActorLocation(CurrentLocation, false, nullptr, ETeleportType::None);
```

### 4. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–±—ã—á–Ω—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º**
```cpp
void APlayerCharacter::MoveRight(float Value)
{
    if (!FMath::IsNearlyZero(Value, 1e-6f))
    {
        // –ë–ª–æ–∫–∏—Ä—É–µ–º –æ–±—ã—á–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è —Å—Ç—Ä–µ–π—Ñ–∞
        if (StrafeComponent && StrafeComponent->bIsStrafing)
        {
            return;
        }
        
        // –û–±—ã—á–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
        FRotator YawRotator(0.0f, GetControlRotation().Yaw, 0.0f);
        FVector RightVector = YawRotator.RotateVector(FVector::RightVector);
        AddMovementInput(RightVector, Value);
    }
}
```

### 5. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ debug —Å–æ–æ–±—â–µ–Ω–∏—è
- –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

## üéÆ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–µ–π—Ñ–∞:**

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- **A + Space** - —Å—Ç—Ä–µ–π—Ñ –≤–ª–µ–≤–æ
- **D + Space** - —Å—Ç—Ä–µ–π—Ñ –≤–ø—Ä–∞–≤–æ
- **Space** - –æ–±—ã—á–Ω—ã–π –ø—Ä—ã–∂–æ–∫ (–µ—Å–ª–∏ –Ω–µ —Å—Ç—Ä–µ–π—Ñ–∏–º)

### **–£—Å–ª–æ–≤–∏—è –¥–ª—è —Å—Ç—Ä–µ–π—Ñ–∞:**
- –ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–∞ –∑–µ–º–ª–µ (–Ω–µ –ø–∞–¥–∞–µ—Ç)
- –ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –ø—Ä–∏—Å–µ–¥–∞–µ—Ç
- –ü—Ä–æ—à–µ–ª cooldown —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å—Ç—Ä–µ–π—Ñ–∞
- –ù–µ —Å—Ç—Ä–µ–π—Ñ–∏—Ç –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–µ–π—Ñ–∞:**
- `StrafeDistance = 200.0f` - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Å—Ç—Ä–µ–π—Ñ–∞
- `StrafeDuration = 0.3f` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
- `StrafeCooldown = 1.0f` - –≤—Ä–µ–º—è –º–µ–∂–¥—É —Å—Ç—Ä–µ–π—Ñ–∞–º–∏
- `StrafeSpeed = 400.0f` - —Å–∫–æ—Ä–æ—Å—Ç—å —Å—Ç—Ä–µ–π—Ñ–∞

## üìã **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:**

### **1. Input Mapping Context:**
–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –∫–ª–∞–≤–∏—à:
- `StrafeLeft` ‚Üí A
- `StrafeRight` ‚Üí D  
- `StrafeSpace` ‚Üí Space

### **2. PlayerController:**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ABTZPlayerController` —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–≤—è–∑–∫–∞–º–∏.

### **3. PlayerCharacter:**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `StrafeComponent` –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
1. **PlayerController** ‚Üí –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥
2. **PlayerCharacter** ‚Üí –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤ StrafeComponent
3. **StrafeComponent** ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É —Å—Ç—Ä–µ–π—Ñ–∞
4. **CharacterMovement** ‚Üí –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∏–∑–∏–∫—É

### **–°–æ–±—ã—Ç–∏—è:**
- `OnStrafeStarted` - –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–µ–π—Ñ–∞
- `OnStrafeCompleted` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å—Ç—Ä–µ–π—Ñ–∞
- `OnStrafeFailed` - –æ—Ç–º–µ–Ω–∞ —Å—Ç—Ä–µ–π—Ñ–∞

### **Debug —Å–æ–æ–±—â–µ–Ω–∏—è:**
–°–∏—Å—Ç–µ–º–∞ –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å—Ç—Ä–µ–π—Ñ–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

## ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–µ–π—Ñ–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –ü–ª–∞–≤–Ω–æ–µ –±–æ–∫–æ–≤–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å –æ–±—ã—á–Ω—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∏–∑–∏–∫–æ–π
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –≤–≤–æ–¥–∞

## üéØ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–µ–π—Ñ –≤ –∏–≥—Ä–µ
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–µ–π—Ñ–∞ –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã
3. –î–æ–±–∞–≤—å—Ç–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å—Ç—Ä–µ–π—Ñ–∞ –≤ Animation Blueprint
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∑–≤—É–∫–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è —Å—Ç—Ä–µ–π—Ñ–∞



